{% extends "base.html" %}

{% block title %}Criar Rotina - GeRot{% endblock %}

{% block content %}
<div class="container">
    <h1 class="page-title">üéØ Criar Nova Rotina</h1>
    
    <div class="card">
        <form method="POST" class="form-grid">
            <div class="form-group">
                <label for="title">T√≠tulo da Rotina*</label>
                <input type="text" id="title" name="title" required
                       placeholder="Ex: Verificar e-mails di√°rios">
            </div>
            
            <div class="form-group">
                <label for="description">Descri√ß√£o</label>
                <textarea id="description" name="description" rows="4"
                          placeholder="Descreva os detalhes da rotina..."></textarea>
            </div>
            
            <div class="form-group">
                <label for="assigned_to">Atribuir Para*</label>
                <select id="assigned_to" name="assigned_to" required>
                    <option value="">Selecione um membro...</option>
                    {% for membro in membros %}
                    <option value="{{ membro.id }}">{{ membro.nome_completo }}</option>
                    {% endfor %}
                </select>
            </div>
            
            <div class="form-row">
                <div class="form-group">
                    <label for="priority">Prioridade</label>
                    <select id="priority" name="priority">
                        <option value="1">Baixa</option>
                        <option value="2">M√©dia</option>
                        <option value="3">Alta</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="estimated_hours">Horas Estimadas</label>
                    <input type="number" id="estimated_hours" name="estimated_hours"
                           min="1" max="40" placeholder="Ex: 8">
                </div>
            </div>
            
            <div class="form-row">
                <div class="form-group">
                    <label for="start_date">Data In√≠cio</label>
                    <input type="date" id="start_date" name="start_date">
                </div>
                
                <div class="form-group">
                    <label for="end_date">Data Fim</label>
                    <input type="date" id="end_date" name="end_date">
                </div>
            </div>
            
            <div class="form-actions">
                <button type="submit" class="btn btn-primary">
                    <i class="fas fa-plus"></i> Criar Rotina
                </button>
                <button type="reset" class="btn btn-secondary">
                    <i class="fas fa-undo"></i> Limpar
                </button>
            </div>
        </form>
    </div>
    
    <div class="card mt-4">
        <h2>üìã Rotinas Criadas</h2>
        
        {% if rotinas %}
        <div class="table-responsive">
            <table class="table">
                <thead>
                    <tr>
                        <th>T√≠tulo</th>
                        <th>Atribu√≠do Para</th>
                        <th>Prioridade</th>
                        <th>Status</th>
                        <th>Criado em</th>
                        <th>A√ß√µes</th>
                    </tr>
                </thead>
                <tbody>
                    {% for rotina in rotinas %}
                    <tr>
                        <td>{{ rotina.title }}</td>
                        <td>{{ rotina.assigned_to_name }}</td>
                        <td>
                            <span class="badge badge-{{ 'danger' if rotina.priority == 3 else 'warning' if rotina.priority == 2 else 'info' }}">
                                {{ 'Alta' if rotina.priority == 3 else 'M√©dia' if rotina.priority == 2 else 'Baixa' }}
                            </span>
                        </td>
                        <td>
                            <span class="badge badge-{{ 'success' if rotina.status == 'concluida' else 'warning' if rotina.status == 'em_andamento' else 'secondary' }}">
                                {{ rotina.status|title }}
                            </span>
                        </td>
                        <td>{{ rotina.created_at }}</td>
                        <td>
                            <div class="btn-group">
                                <button class="btn btn-sm btn-info" title="Editar">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="btn btn-sm btn-danger" title="Excluir">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        {% else %}
        <div class="empty-state">
            <div class="icon">üìù</div>
            <h3>Nenhuma Rotina Criada</h3>
            <p>Use o formul√°rio acima para criar sua primeira rotina!</p>
        </div>
        {% endif %}
    </div>
</div>

<style>
.form-grid {
    display: grid;
    gap: 1rem;
    max-width: 800px;
    margin: 0 auto;
}

.form-row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1rem;
}

.form-group {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
}

.form-actions {
    display: flex;
    gap: 1rem;
    justify-content: flex-end;
    margin-top: 1rem;
}

.empty-state {
    text-align: center;
    padding: 2rem;
}

.empty-state .icon {
    font-size: 3rem;
    margin-bottom: 1rem;
}

@media (max-width: 768px) {
    .form-row {
        grid-template-columns: 1fr;
    }
}
</style>
{% endblock %} 